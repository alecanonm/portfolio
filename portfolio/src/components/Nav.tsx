import { motion } from "framer-motion";
import { useState, useEffect } from "react";

const navMotion = {
  visible: {
    opacity: 10,
    transition: {
      when: "beforeChildren",
      staggerChildren: 0.15,
    },
  },
  hidden: {
    opacity: 0,
  },
};

const itemMotion = {
  visible: { opacity: 1, x: 0 },
  hidden: { opacity: 0, x: -100 },
};

const Nav = () => {
  const [toggled, setToggled] = useState(false);
  const [matches, setMatches] = useState(false);

  useEffect(() => {
    const handleResize = () => {
      setMatches(window.innerWidth <= 900);
    };
    window.addEventListener("resize", handleResize);
    handleResize();
    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);

  return (
    <nav className=" dark:bg-[#000000] bg-[#0C40CF] text-white mb-16 max-md:mb-5  px-20  flex justify-between items-center   font-medium max-md:px-5 max-lg:px-32">
      <a href="/#howdy">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="70px"
          height="70px"
          viewBox="0 0 70 70"
          version="1.1"
          fill="white"
        >
          <path d="M 50.511719 14.835938 L 50.71875 14.835938 C 50.9375 14.835938 51.15625 14.835938 51.375 14.835938 L 51.488281 14.835938 C 52.632812 14.835938 53.769531 14.851562 54.910156 14.992188 L 55.109375 15.015625 C 59.34375 15.535156 63.449219 17.242188 66.613281 20.136719 C 66.679688 20.199219 66.75 20.261719 66.820312 20.320312 C 67.109375 20.566406 67.375 20.832031 67.640625 21.097656 L 67.777344 21.230469 C 68.023438 21.480469 68.261719 21.734375 68.492188 22.003906 C 68.539062 22.058594 68.585938 22.113281 68.632812 22.164062 C 70 23.742188 70 23.742188 70 24 C 69.886719 24.089844 69.769531 24.179688 69.652344 24.261719 C 69.582031 24.316406 69.507812 24.371094 69.4375 24.421875 L 69.324219 24.503906 C 69.175781 24.617188 69.03125 24.730469 68.886719 24.84375 L 68.71875 24.976562 L 68.632812 25.046875 C 68.15625 25.417969 67.675781 25.789062 67.195312 26.160156 C 66.996094 26.3125 66.792969 26.472656 66.59375 26.628906 C 66.1875 26.941406 65.78125 27.257812 65.371094 27.570312 C 65.027344 27.835938 64.679688 28.101562 64.335938 28.371094 C 64.074219 28.574219 63.808594 28.777344 63.546875 28.980469 C 63.34375 29.136719 63.144531 29.292969 62.941406 29.449219 C 62.640625 29.683594 62.339844 29.917969 62.039062 30.148438 C 61.90625 30.25 61.773438 30.355469 61.640625 30.457031 L 61.523438 30.550781 C 61.441406 30.613281 61.363281 30.675781 61.285156 30.738281 L 61.179688 30.824219 L 61.082031 30.898438 C 60.996094 30.960938 60.996094 30.960938 60.847656 31.007812 L 60.726562 30.867188 L 60.558594 30.671875 L 60.480469 30.582031 C 60.082031 30.121094 59.675781 29.679688 59.25 29.253906 L 59.113281 29.117188 C 58.402344 28.402344 57.589844 27.800781 56.710938 27.308594 L 56.597656 27.242188 C 54.191406 25.898438 51.222656 25.554688 48.5625 26.296875 C 47.144531 26.714844 45.804688 27.398438 44.734375 28.429688 C 44.671875 28.484375 44.605469 28.542969 44.539062 28.597656 C 44.121094 28.964844 43.769531 29.367188 43.433594 29.808594 C 43.378906 29.878906 43.328125 29.949219 43.273438 30.015625 C 42.140625 31.511719 41.425781 33.347656 41.132812 35.195312 L 41.109375 35.335938 C 40.59375 38.578125 41.238281 42.246094 43.179688 44.929688 C 43.535156 45.410156 43.933594 45.859375 44.347656 46.292969 L 44.441406 46.398438 C 44.738281 46.707031 45.078125 46.960938 45.417969 47.21875 L 45.539062 47.3125 C 47.753906 48.914062 50.542969 49.40625 53.214844 48.996094 C 55.398438 48.636719 57.292969 47.699219 58.925781 46.210938 C 59.003906 46.136719 59.085938 46.066406 59.164062 45.996094 C 59.625 45.585938 60.0625 45.15625 60.457031 44.6875 C 60.5625 44.570312 60.664062 44.449219 60.765625 44.332031 L 60.84375 44.242188 L 60.917969 44.15625 L 60.984375 44.078125 C 61.039062 44.007812 61.089844 43.933594 61.140625 43.859375 C 61.386719 43.9375 61.578125 44.085938 61.78125 44.238281 L 62.019531 44.414062 L 62.140625 44.503906 C 62.324219 44.636719 62.511719 44.773438 62.695312 44.90625 L 62.804688 44.984375 C 63.066406 45.175781 63.335938 45.359375 63.605469 45.542969 C 63.925781 45.757812 64.238281 45.984375 64.546875 46.21875 C 64.828125 46.433594 65.121094 46.632812 65.414062 46.832031 C 65.828125 47.113281 66.234375 47.410156 66.640625 47.707031 C 67.132812 48.0625 67.628906 48.417969 68.128906 48.765625 C 68.441406 48.984375 68.75 49.203125 69.058594 49.429688 C 69.222656 49.550781 69.382812 49.664062 69.5625 49.761719 C 69.789062 49.890625 69.964844 49.996094 70.058594 50.253906 C 70.101562 50.703125 69.9375 50.976562 69.660156 51.316406 C 69.582031 51.410156 69.5 51.503906 69.414062 51.597656 C 69.367188 51.65625 69.320312 51.714844 69.273438 51.769531 C 69.183594 51.875 69.09375 51.980469 69.003906 52.085938 C 68.890625 52.21875 68.785156 52.351562 68.675781 52.488281 C 68.199219 53.070312 67.660156 53.601562 67.128906 54.136719 L 67 54.265625 C 66.757812 54.507812 66.511719 54.738281 66.25 54.957031 C 66.203125 55 66.152344 55.042969 66.105469 55.085938 C 62.753906 57.957031 58.71875 59.507812 54.375 60.070312 L 54.269531 60.082031 C 49.835938 60.652344 45.238281 59.984375 41.183594 58.121094 L 41.046875 58.0625 C 39.164062 57.203125 37.386719 56.03125 35.855469 54.636719 C 35.777344 54.5625 35.699219 54.492188 35.617188 54.421875 C 35.308594 54.148438 35.015625 53.859375 34.722656 53.566406 L 34.589844 53.4375 C 34.34375 53.1875 34.105469 52.9375 33.878906 52.671875 L 33.808594 52.589844 C 33.742188 52.511719 33.679688 52.433594 33.613281 52.355469 L 33.546875 52.28125 L 33.484375 52.207031 L 33.417969 52.128906 C 33.34375 52.039062 33.34375 52.039062 33.28125 51.925781 C 33.164062 51.738281 33.074219 51.617188 32.855469 51.558594 C 32.667969 51.542969 32.480469 51.542969 32.289062 51.546875 C 32.21875 51.542969 32.144531 51.542969 32.070312 51.542969 C 31.875 51.542969 31.675781 51.542969 31.480469 51.546875 C 31.296875 51.546875 31.109375 51.546875 30.925781 51.542969 C 30.386719 51.542969 29.847656 51.546875 29.308594 51.546875 L 25.652344 51.550781 L 25.652344 42.105469 L 28.816406 42.105469 C 28.617188 41.460938 28.617188 41.460938 28.382812 40.828125 L 28.328125 40.695312 C 28.292969 40.601562 28.253906 40.507812 28.214844 40.414062 C 28.132812 40.207031 28.054688 40.003906 27.972656 39.800781 L 27.84375 39.476562 C 27.617188 38.910156 27.394531 38.34375 27.171875 37.773438 L 26.925781 37.152344 L 26.867188 36.992188 C 26.625 36.378906 26.382812 35.761719 26.140625 35.144531 C 25.746094 34.144531 25.355469 33.144531 24.964844 32.144531 C 24.675781 31.410156 24.386719 30.671875 24.097656 29.9375 C 23.988281 30.042969 23.957031 30.117188 23.90625 30.253906 L 23.847656 30.398438 L 23.785156 30.554688 L 23.71875 30.722656 C 23.671875 30.847656 23.621094 30.96875 23.574219 31.09375 C 23.496094 31.296875 23.414062 31.5 23.335938 31.699219 L 23.25 31.914062 L 23.207031 32.027344 L 23.070312 32.371094 C 22.707031 33.292969 22.339844 34.21875 21.972656 35.140625 L 21.800781 35.570312 C 21.160156 37.175781 20.519531 38.78125 19.878906 40.390625 C 19.753906 40.703125 19.628906 41.011719 19.503906 41.324219 C 19.457031 41.441406 19.410156 41.554688 19.367188 41.667969 L 19.324219 41.769531 C 19.234375 42 19.234375 42 19.179688 42.105469 L 22.390625 42.105469 L 22.390625 51.550781 L 15.578125 51.550781 L 15.527344 51.792969 C 15.503906 51.867188 15.476562 51.9375 15.449219 52.007812 L 15.398438 52.132812 L 15.34375 52.269531 L 15.289062 52.414062 C 15.226562 52.570312 15.160156 52.730469 15.097656 52.886719 C 15.054688 53 15.007812 53.113281 14.964844 53.222656 C 14.871094 53.460938 14.777344 53.695312 14.679688 53.933594 C 14.5625 54.226562 14.445312 54.523438 14.328125 54.820312 C 14.210938 55.109375 14.097656 55.398438 13.980469 55.6875 L 13.917969 55.84375 C 13.453125 57.011719 12.980469 58.175781 12.511719 59.339844 L 0 59.339844 C 0 58.5 0 58.5 0.167969 58.136719 L 0.222656 58.007812 C 0.285156 57.875 0.34375 57.738281 0.40625 57.605469 C 0.445312 57.507812 0.488281 57.414062 0.53125 57.316406 C 0.617188 57.117188 0.707031 56.917969 0.792969 56.71875 C 0.980469 56.296875 1.15625 55.871094 1.335938 55.445312 C 1.433594 55.214844 1.527344 54.988281 1.625 54.757812 L 1.683594 54.625 C 1.890625 54.128906 2.101562 53.632812 2.3125 53.136719 C 2.589844 52.484375 2.867188 51.835938 3.140625 51.1875 C 3.429688 50.496094 3.722656 49.804688 4.015625 49.117188 C 4.308594 48.433594 4.597656 47.75 4.886719 47.0625 L 4.945312 46.925781 L 5.355469 45.953125 L 5.824219 44.84375 L 5.882812 44.703125 C 6.167969 44.027344 6.457031 43.347656 6.746094 42.667969 C 7.019531 42.023438 7.292969 41.378906 7.5625 40.734375 L 7.621094 40.597656 L 8.148438 39.351562 C 8.261719 39.078125 8.375 38.808594 8.492188 38.535156 L 8.550781 38.398438 C 8.867188 37.648438 9.183594 36.898438 9.503906 36.144531 C 9.804688 35.445312 10.101562 34.746094 10.394531 34.042969 L 10.453125 33.910156 C 10.742188 33.21875 11.035156 32.53125 11.324219 31.84375 L 11.382812 31.707031 C 11.667969 31.027344 11.957031 30.351562 12.246094 29.671875 C 12.519531 29.027344 12.792969 28.382812 13.0625 27.738281 L 13.121094 27.597656 L 13.648438 26.355469 C 13.761719 26.082031 13.878906 25.808594 13.992188 25.539062 L 14.050781 25.402344 C 14.367188 24.648438 14.6875 23.898438 15.003906 23.148438 C 15.304688 22.449219 15.601562 21.75 15.898438 21.046875 C 16.03125 20.730469 16.164062 20.414062 16.296875 20.09375 C 16.761719 19 17.222656 17.90625 17.6875 16.8125 L 17.792969 16.558594 C 17.84375 16.445312 17.890625 16.328125 17.941406 16.210938 L 17.984375 16.109375 C 18.085938 15.867188 18.195312 15.625 18.304688 15.382812 L 30.035156 15.382812 L 31.652344 19.210938 C 31.789062 19.542969 31.929688 19.871094 32.070312 20.199219 C 32.90625 22.179688 32.90625 22.179688 33.296875 23.121094 L 33.394531 23.121094 C 33.457031 23.050781 33.515625 22.976562 33.574219 22.898438 C 33.792969 22.628906 34.023438 22.375 34.261719 22.125 C 34.40625 21.972656 34.542969 21.820312 34.679688 21.664062 C 34.859375 21.457031 35.054688 21.269531 35.257812 21.082031 L 35.371094 20.976562 C 35.472656 20.882812 35.578125 20.785156 35.679688 20.6875 L 35.820312 20.558594 C 36.117188 20.285156 36.433594 20.035156 36.753906 19.789062 C 36.851562 19.710938 36.953125 19.632812 37.050781 19.554688 C 40.191406 17.039062 44.1875 15.507812 49.261719 14.894531 L 49.378906 14.882812 C 49.757812 14.84375 50.132812 14.839844 50.511719 14.835938 Z M 50.511719 14.835938 " />
        </svg>
      </a>
      {!matches && (
        <section className=" flex ">
          <a
            className=" hover:bg-[#43a2fc] dark:hover:bg-slate-400 p-1 px-4 rounded transition-all duration-300 "
            href="/#about"
          >
            About
          </a>
          <a
            className=" hover:bg-[#43a2fc] dark:hover:bg-slate-400 p-1 px-4 rounded transition-all duration-300"
            href="/project"
          >
            Projects
          </a>
          <a
            className=" hover:bg-[#43a2fc] dark:hover:bg-slate-400 p-1 px-4 rounded transition-all duration-300"
            href="/#skills"
          >
            Skills
          </a>
          <a
            className=" hover:bg-[#43a2fc] dark:hover:bg-slate-400 p-1 px-4 rounded transition-all duration-300"
            href="/#contact"
          >
            Contact
          </a>
          <a
            className=" hover:bg-[#43a2fc] dark:hover:bg-slate-400 p-1 px-4 rounded transition-all duration-300"
            href="/#qualifications"
          >
            Certifications
          </a>
        </section>
      )}
      {matches && (
        <section
          onClick={() => setToggled((prevToggled) => !prevToggled)}
          className=" space-y-1 cursor-pointer z-50"
        >
          <motion.span
            animate={{ rotateZ: toggled ? 45 : 0, y: toggled ? 8 : 0 }}
            className=" block h-1 w-8 rounded bg-white"
          ></motion.span>
          <motion.span
            animate={{ width: toggled ? 0 : 26 }}
            className=" block h-1 w-6 rounded bg-white"
          ></motion.span>
          <motion.span
            animate={{
              rotateZ: toggled ? -45 : 0,
              y: toggled ? -8 : 0,
              width: toggled ? 30 : 18,
            }}
            className=" block h-1 w-4 rounded bg-white"
          ></motion.span>
        </section>
      )}
      {toggled && matches && (
        <motion.section
          animate={{ opacity: 1, x: 0 }}
          initial={{ opacity: 0, x: 100 }}
          className=" fixed flex bg-[#001E6C] dark:bg-black bottom-0 left-0 w-full h-screen items-center justify-center"
        >
          <motion.section
            variants={navMotion}
            animate="visible"
            initial="hidden"
            className=" flex flex-col gap-12 text-lg"
          >
            <motion.a
              onClick={() => {
                setToggled((prev) => !prev);
              }}
              variants={itemMotion}
              href="/#about"
            >
              About
            </motion.a>
            <motion.a variants={itemMotion} href="/project">
              Projects
            </motion.a>
            <motion.a
              onClick={() => {
                setToggled((prev) => !prev);
              }}
              variants={itemMotion}
              href="/#skills"
            >
              Skills
            </motion.a>
            <motion.a
              onClick={() => {
                setToggled((prev) => !prev);
              }}
              variants={itemMotion}
              href="/#contact"
            >
              Contact
            </motion.a>
            <motion.a
              variants={itemMotion}
              onClick={() => {
                setToggled((prev) => !prev);
              }}
              href="/#qualifications"
            >
              Certifications
            </motion.a>
          </motion.section>
        </motion.section>
      )}
    </nav>
  );
};

export default Nav;
